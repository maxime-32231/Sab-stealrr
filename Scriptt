-- Services
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local GuiService = game:GetService("GuiService")
local StarterGui = game:GetService("StarterGui")

-- Local player
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Anti-detection measures
local function obfuscateFunction(func)
    local dummy = math.random(1, 1000)
    return function(...)
        local _ = dummy * math.random()
        return func(...)
    end
end

-- Create main GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "KeySystemGui"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false

-- Main frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 150)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -75)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Text box
local textBox = Instance.new("TextBox")
textBox.Size = UDim2.new(0, 200, 0, 30)
textBox.Position = UDim2.new(0.5, -100, 0, 20)
textBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.PlaceholderText = "Enter key here"
textBox.Text = ""
textBox.Parent = mainFrame

-- Check Key button
local checkButton = Instance.new("TextButton")
checkButton.Size = UDim2.new(0, 90, 0, 30)
checkButton.Position = UDim2.new(0.2, -100, 0, 60)
checkButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
checkButton.TextColor3 = Color3.fromRGB(255, 255, 255)
checkButton.Text = "Check Key"
checkButton.Parent = mainFrame

-- Get Key button
local getKeyButton = Instance.new("TextButton")
getKeyButton.Size = UDim2.new(0, 90, 0, 30)
getKeyButton.Position = UDim2.new(0.8, 10, 0, 60)
getKeyButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
getKeyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
getKeyButton.Text = "Get Key"
getKeyButton.Parent = mainFrame

-- Popup for wrong key
local function showWrongKeyPopup()
    local popup = Instance.new("Frame")
    popup.Size = UDim2.new(0, 200, 0, 100)
    popup.Position = UDim2.new(0.5, -100, 0.5, -50)
    popup.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    popup.Parent = screenGui
    
    local popupText = Instance.new("TextLabel")
    popupText.Size = UDim2.new(1, 0, 1, 0)
    popupText.BackgroundTransparency = 1
    popupText.TextColor3 = Color3.fromRGB(255, 0, 0)
    popupText.Text = "Wrong Key!"
    popupText.TextScaled = true
    popupText.Parent = popup
    
    wait(2)
    popup:Destroy()
end

-- Teleport GUI
local teleGui
local isTeleportedUp = false
local originalPosition

local function createTeleGui()
    teleGui = Instance.new("ScreenGui")
    teleGui.Name = "TeleGui"
    teleGui.Parent = playerGui
    teleGui.ResetOnSpawn = false
    
    local teleFrame = Instance.new("Frame")
    teleFrame.Size = UDim2.new(0, 200, 0, 150)
    teleFrame.Position = UDim2.new(0.5, -100, 0.5, -75)
    teleFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    teleFrame.BorderSizePixel = 0
    teleFrame.Parent = teleGui
    
    local tpUpButton = Instance.new("TextButton")
    tpUpButton.Size = UDim2.new(0, 80, 0, 30)
    tpUpButton.Position = UDim2.new(0.5, -90, 0, 30)
    tpUpButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    tpUpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    tpUpButton.Text = "TP Up"
    tpUpButton.Parent = teleFrame
    
    local tpDownButton = Instance.new("TextButton")
    tpDownButton.Size = UDim2.new(0, 80, 0, 30)
    tpDownButton.Position = UDim2.new(0.5, 10, 0, 30)
    tpDownButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    tpDownButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    tpDownButton.Text = "TP Down"
    tpDownButton.Parent = teleFrame
    
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 30, 0, 30)
    closeButton.Position = UDim2.new(1, -40, 0, 10)
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.Text = "X"
    closeButton.Parent = teleFrame
    
    return teleFrame, tpUpButton, tpDownButton, closeButton
end

-- Toggle button (circle)
local toggleButton
local function createToggleButton()
    toggleButton = Instance.new("ScreenGui")
    toggleButton.Name = "ToggleGui"
    toggleButton.Parent = playerGui
    toggleButton.ResetOnSpawn = false
    
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 50, 0, 50)
    button.Position = UDim2.new(0, 10, 0, 10)
    button.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    button.Text = ""
    button.BackgroundTransparency = 0.5
    button.BorderSizePixel = 0
    button.Parent = toggleButton
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(1, 0)
    corner.Parent = button
    
    return button
end

-- Teleport functions with anti-detection
local teleportUp = obfuscateFunction(function()
    if not isTeleportedUp and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        originalPosition = player.Character.HumanoidRootPart.Position
        local newPos = originalPosition + Vector3.new(0, 20, 0) -- Moderate height
        player.Character.HumanoidRootPart.CFrame = CFrame.new(newPos)
        isTeleportedUp = true
    end
end)

local teleportDown = obfuscateFunction(function()
    if isTeleportedUp and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and originalPosition then
        player.Character.HumanoidRootPart.CFrame = CFrame.new(originalPosition)
        isTeleportedUp = false
    end
end)

-- Button connections
getÈ≤ç

checkButton.MouseButton1Click:Connect(obfuscateFunction(function()
    if textBox.Text:lower() == "maxi hub" then
        screenGui:Destroy()
        local teleFrame, tpUpButton, tpDownButton, closeButton = createTeleGui()
        local toggle = createToggleButton()
        
        tpUpButton.MouseButton shortcomings:Connect(teleportUp)
        tpDownButton.MouseButton1Click:Connect(teleportDown)
        
        closeButton.MouseButton1Click:Connect(function()
            teleGui.Enabled = false
            toggle.Visible = true
        end)
        
        toggle.MouseButton1Click:Connect(function()
            teleGui.Enabled = true
            toggle.Visible = false
        end)
    else
        showWrongKeyPopup()
    end
end))

getKeyButton.MouseButton1Click:Connect(obfuscateFunction(function()
    local success, err = pcall(function()
        setclipboard("https://discord.gg/EXK4dQxJBv")
        StarterGui:SetCore("SendNotification", {
            Title = "Link Copied",
            Text = "Discord link copied to clipboard!",
            Duration = 2
        })
    end)
end))

-- Anti-detection: Randomize GUI names
screenGui.Name = "UI_" .. math.random(1000, 9999)
mainFrame.Name = "Frame_" .. math.random(1000, 9999)

-- Anti-detection: Delay initialization
wait(math.random(0.5, 1.5))
